@using WaterLibrary.pilipala;
@using WaterLibrary.pilipala.Entity;
@using WaterLibrary.CommentLake;

@inject ICORE CORE

@{
    CommentLake CommentLake = new CommentLake();


    CORE.SetTables();
    CORE.SetViews();

    CORE.LinkOn += CommentLake.Ready;
    /* 启动内核 */
    User User = CORE.Run();
}

<div id="NavLine" class="L M bSha">
    <div class="contain cur bRds" onclick="up(); showPost(12387, '我');">
        <img class="Avatar bSha" src="@User.Avatar">
        <div class="Name">@User.Name.ToUpper()的小站</div>
    </div>
    <div class="SiderBtn R cur" onclick="ListToggle()"></div>
</div>

<div id="SiderList" class="bSha">
    <m-card v-for="d in List" v-bind:item="d" v-bind:key="d.index"></m-card>

    <div class="Co cur" onclick="up();(12388,'关于博客');ListToggle()">
        @(User.Name)的博客©2016-2020保留所有权利<br>
        基于pilipala构建<br>
        Field Theme Designed By Thaumy<br>
    </div>
</div>

<div class="Shadow" onclick="ListToggle()"></div>

<!-- vue导航组件 -->
<script>
    Vue.component('m-card', {
        props: ['item'],
        template: '<div class="Card cur bRds" v-on:click="m_card_click(item.ID)" :key="item.index"><div class="contain">{{item.Title}}</div></div>',
        methods: {
            m_card_click: function (ID) {
                up();
                ListToggle();

                showPost(ID);

                AvaOutline.style = {
                    'border-color': 'rgba(0,0,0,0)'
                }
                CoOutline.style = {
                    'border-color': 'rgba(0,0,0,0)'
                }
            }
        }
    })
</script>

